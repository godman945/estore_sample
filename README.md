init

1.信件
Dear Alex, 

昨日會議中說到要開發的傳送物流資料簡述如下: 

Fulfillment 的文件說明位置如下:
http://10.64.34.61:9080/LogisticWS/swagger-ui.html
附件是Fulfillment 的Sample。
基本上是將eStore  的SO_TEMP , SOD_TEMP 資料Call API 寫入Fulfillment 之中，
SO_TEMP 為物流資料主檔，SOD_TEMP 為明細檔，sono 為key 
抓SO_TEMP 的DWNFLAG =0, DWNDATE 為空的資料查出，
照shippingdatas這支  API 規格寫入Fulfillment 
完成後UPDATE DWNFLAG=1, DWNDATE 執行時間 寫入。
細節我在找時間跟你說明。


2.語法

select * from SO_TEMP where DWNFLAG = 0 and DWNDATE  is null;




CREATE TABLE "ES_DEV"."ALEX_SO_TEMP" 
   (	"SONO" VARCHAR2(20 BYTE) NOT NULL ENABLE, 
	"STORENO" VARCHAR2(10 BYTE) DEFAULT 'R2801' NOT NULL ENABLE, 
	"ORDER_DATE" VARCHAR2(8 BYTE), 
	"SALES_NO" VARCHAR2(10 BYTE), 
	"COMP_NAME" VARCHAR2(50 BYTE), 
	"RECIPIENT" VARCHAR2(32 BYTE), 
	"UNINO" VARCHAR2(8 BYTE), 
	"UNI_TITLE" VARCHAR2(50 BYTE), 
	"SEX" VARCHAR2(1 BYTE), 
	"PAY_TYPE" VARCHAR2(1 BYTE), 
	"COMP_TEL" VARCHAR2(20 BYTE), 
	"HOME_TEL" VARCHAR2(20 BYTE), 
	"MOTONUM" VARCHAR2(10 BYTE), 
	"DELI_FLAG" VARCHAR2(1 BYTE), 
	"DELI_STORENO" VARCHAR2(10 BYTE), 
	"DELI_ADDR" VARCHAR2(100 BYTE), 
	"DELI_REMARK" VARCHAR2(80 BYTE), 
	"DELI_SEG" VARCHAR2(1 BYTE), 
	"SAFLAG" VARCHAR2(1 BYTE), 
	"NPFLAG" VARCHAR2(1 BYTE), 
	"TOTALAMT" NUMBER(19,4), 
	"INVAMT" NUMBER(19,4), 
	"PROMOTENO" VARCHAR2(12 BYTE), 
	"DWNFLAG" VARCHAR2(1 BYTE) DEFAULT '0', 
	"DWNDATE" DATE DEFAULT SYSDATE, 
	"SENDDATE" DATE, 
	"MW_TXID" VARCHAR2(25 BYTE), 
	"SUBORDERTYPE" VARCHAR2(1 BYTE), 
	"PACKAGE_NO" VARCHAR2(20 BYTE), 
	"PREORDER_FLAG" VARCHAR2(1 BYTE), 
	"SOURCE_TYPE" VARCHAR2(1 BYTE), 
	"EINVOICE_FLAG" VARCHAR2(1 BYTE), 
	"INVOICE_NO" VARCHAR2(10 BYTE), 
	"INVOICE_DATE" VARCHAR2(8 BYTE), 
	"INVOICE_DOC" VARCHAR2(1 BYTE), 
	"TAXABLE" VARCHAR2(1 BYTE), 
	"MONOPOLY_FLAG" VARCHAR2(1 BYTE), 
	"SOID" VARCHAR2(18 BYTE), 
	"CONVERTMEMO" VARCHAR2(100 BYTE), 
	"DWNUSER" VARCHAR2(20 BYTE), 
	"EMAIL" VARCHAR2(50 BYTE), 
	"POSTCODE" VARCHAR2(6 BYTE), 
	"DONATIONUNIT" VARCHAR2(10 BYTE), 
	"EINVOICE_ID" NUMBER(15,0), 
	"INVOICE_ADDR" VARCHAR2(100 BYTE), 
	"CARRIERTYPE" VARCHAR2(20 BYTE), 
	"CARRIERID1" VARCHAR2(64 BYTE), 
	"CARRIERID2" VARCHAR2(64 BYTE), 
	"ID3" VARCHAR2(80 BYTE), 
	"MSISDN_TYPE" VARCHAR2(1 BYTE), 
	"TRANS_ID" VARCHAR2(50 BYTE), 
	"MVPN_FLAG" VARCHAR2(1 BYTE), 
	"IDCARD_FLAG" CHAR(1 BYTE), 
	"SECONDID_TYPE" VARCHAR2(10 BYTE), 
	"ORDER_ID" VARCHAR2(32 BYTE), 
	"CS_STORE_NO" VARCHAR2(20 BYTE), 
	"CS_STORE_NAME" VARCHAR2(400 BYTE), 
	"CS_STORE_ADDRESS" VARCHAR2(400 BYTE), 
	"CS_STORE_AREACODE" VARCHAR2(10 BYTE), 
	"CS_NAME" VARCHAR2(20 BYTE), 
	"CS_GET_TYPE" VARCHAR2(20 BYTE), 
	 PRIMARY KEY ("SONO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 5242880 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "ESTORE_DATA"  ENABLE
   );
   
   
   
   
    COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SONO" IS '若bundle 件會填 bundle id,若為非 bundle 件會填 cono';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."STORENO" IS 'DEFAULT:2801';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SEX" IS '1.男 2.女';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."PAY_TYPE" IS '1.免付款 2.現金 3.刷卡 4.電子錢包(信用卡) 5.電子錢包(虛擬帳號)';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."MOTONUM" IS 'sosa_temp.lineno = 1 的行動電話';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."DELI_FLAG" IS '1.是 2.否';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."DELI_SEG" IS '1.早上2.下午3.晚上4.皆可';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SAFLAG" IS '1.是2.否[門號可攜訂單(PH,PC)>0或新啟用(PR,GA,PC,PH)>0]';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."NPFLAG" IS '1.是2.否[門號可攜訂單(PH,PC)>0]';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."PROMOTENO" IS 'sosa_temp.lineno = 1 的促銷代碼';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."DWNFLAG" IS '0.未處理1.已處理';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SUBORDERTYPE" IS '1.有貨有發票(有庫存非服務性商品叫有貨發票>0)、一般門市件。2.有貨無發票(零元訂單)(門市件或INVAMT發票金額=0)3.無貨有發票(續通話約預繳，宅配件)4.Calling Card(有非實體貨有發票)。';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."PREORDER_FLAG" IS '1.是2.否';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SOURCE_TYPE" IS '來源別：G.新啟用, L:忠誠續約, U:2G轉3G, B: bundle, N: none SA商品';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."EINVOICE_FLAG" IS '1.是2.否';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."INVOICE_DOC" IS '1.是2.否';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."TAXABLE" IS '1=應稅,2=零稅,3=免稅';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."MONOPOLY_FLAG" IS '1.是 2.否';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."SOID" IS 'eStore不需填寫';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."CONVERTMEMO" IS 'eStore不需填寫';
   COMMENT ON COLUMN "ES_DEV"."ALEX_SO_TEMP"."DWNUSER" IS 'eStore不需填寫';
   
   
   
   INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_STORENO, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, EINVOICE_ID, INVOICE_ADDR, CARRIERTYPE, CARRIERID1, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID, CS_STORE_NO, CS_STORE_NAME, CS_STORE_ADDRESS, CS_STORE_AREACODE, CS_NAME) VALUES ('TG210203000107', 'R2801', '20210203', '00000', '測試摩', '測試摩', '1', '4', '0955809320', '0916554257', '2', 'R3121', '新竹巨城門市 - 新竹市東區中央路229號B1', '1', '2', '2990', '2990', 'SLD0713-06', '0', TO_DATE('2021-02-04 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), '116123491167515', '1', 'P210203000090', '2', 'G', '1', '0', '1', '2', 'asdf@moe.te', '114063', '212616', '台北市內湖區瑞光路４６８號', 'CQ0001', 'TP03000001234567', 'NON_TG210203000107', '3', '766961234860231286', '2', '2', 'NBT02', '2000065979054134', '3121', '新竹巨城門市', '新竹市東區中央路229號B1', '300', 'RETAIL')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, EINVOICE_ID, INVOICE_ADDR, CARRIERTYPE, CARRIERID1, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID, CS_STORE_NO, CS_STORE_NAME, CS_STORE_ADDRESS, CS_STORE_AREACODE, CS_NAME, CS_GET_TYPE) VALUES ('TG210203000116', 'R2801', '20210203', '00000', '測試摩', '測試摩', '1', '4', '0955809320', '0933815903', '2', '台北市中山區大直街88號6樓', '1', '1', '600', '600', 'SLD0648-01', '0', TO_DATE('2021-02-04 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), '116123493747522', '1', 'P210203000116', '2', 'G', '1', '0', '1', '2', 'chenweihuang@fareastone.com.tw', '104042', '212617', '台北市中山區大直街88號6樓', 'CQ0001', 'TP03000001234567', 'NON_TG210203000116', '3', '884261234927315237', '2', '2', 'NBT02', '2000065979060407', 'F006667', '全家朱崙店', '台北市中山區朱崙街67號', '104', 'FAMILY', '3')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, EINVOICE_ID, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID) VALUES ('TG210129000019', 'R2801', '20210129', '李冠融', '李冠融', '1', '7', '0963227936', '0916522947', '2', '新北市汐止區大同路二段312巷16弄29號五樓', '1', '2', '0', '0', 'SLD0787-01', '0', TO_DATE('2021-01-29 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), '2', 'P210129000019', '2', 'G', '1', '0', '1', '2', 'ron.lee@hy-tech.com.tw', '221043', '212615', 'NON_TG210129000019', '3', '977061188613481052', '2', '2', 'NBT02', '2000065974277921')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_STORENO, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, EINVOICE_ID, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID, CS_STORE_NO, CS_STORE_NAME, CS_STORE_ADDRESS, CS_STORE_AREACODE, CS_NAME) VALUES ('TG210111000017', 'R2801', '20210111', '蔡蔡蔡', '蔡蔡蔡', '1', '7', '0916224596', '0916526967', '2', 'R2146', '內湖瑞光門市 - 台北市內湖區瑞光路468號', '1', '2', '0', '0', 'SLD0766-01', '0', TO_DATE('2021-01-11 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), '2', 'P210111000017', '2', 'G', '1', '0', '1', '2', 'a@22.com', '114062', '212613', 'NON_TG210111000017', '3', '185961034448723590', '2', '2', 'NBT02', '2000065961710925', '2146', '內湖瑞光門市', '台北市內湖區瑞光路468號', '114', 'RETAIL')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, DONATIONUNIT, EINVOICE_ID, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID) VALUES ('TG210128000024', 'R2801', '20210128', '00000', '李冠融', '李冠融', '1', '2', '0963227936', '0916537833', '2', '新北市汐止區大同路二段312巷16弄29號五樓', '1', '2', '21500', '21500', 'SLD0689-01', '0', TO_DATE('2021-01-28 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'TG210128000024', '1', 'P210128000024', '2', 'G', '1', '0', '1', '2', 'ron.lee@hy-tech.com.tw', '221043', '919', '212614', 'NON_TG210128000024', '3', '818861180053687972', '2', '2', 'NBT02', '2000065973428132')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, EINVOICE_ID, INVOICE_ADDR, CARRIERTYPE, CARRIERID1, ID3, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE) VALUES ('TD210203000051', 'R2801', '20210203', '00000', '測試摩', '2', '2', '0955809320', '1', '新北市板橋區四川路一段334號', '2', '2', '6990', '6990', '0', TO_DATE('2021-02-04 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'TD210203000051', '1', 'P210203000051', '2', 'N', '1', '0', '1', '2', 'asdf@moe.te', '220217', '212618', '新北市板橋區四川路一段334號', 'CQ0001', 'TP030001234566', 'NON_TD210203000051', 'none', '2', '0', 'NBT02')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, DONATIONUNIT, EINVOICE_ID, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID) VALUES ('TG210108000015', 'R2801', '20210108', '00000', '黃測試', '黃測試', '1', '2', '0987654321', '0916523471', '2', '台北市內湖區瑞光路４６８號', '1', '2', '26950', '26950', 'SLD0766-01', '0', TO_DATE('2021-01-08 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'TG210108000015', '1', 'P210108000015', '2', 'G', '1', '0', '1', '2', 'aa@aa.aa', '114063', '25885', '212611', 'NON_TG210108000015', '3', '948761007223423744', '2', '0', 'NBT02', '2000065960592421')
INSERT INTO "ES_DEV"."ALEX_SO_TEMP" (SONO, STORENO, ORDER_DATE, SALES_NO, COMP_NAME, RECIPIENT, SEX, PAY_TYPE, COMP_TEL, MOTONUM, DELI_FLAG, DELI_ADDR, SAFLAG, NPFLAG, TOTALAMT, INVAMT, PROMOTENO, DWNFLAG, SENDDATE, MW_TXID, SUBORDERTYPE, PACKAGE_NO, PREORDER_FLAG, SOURCE_TYPE, EINVOICE_FLAG, INVOICE_DOC, TAXABLE, MONOPOLY_FLAG, EMAIL, POSTCODE, DONATIONUNIT, EINVOICE_ID, ID3, MSISDN_TYPE, TRANS_ID, MVPN_FLAG, IDCARD_FLAG, SECONDID_TYPE, ORDER_ID) VALUES ('TL210108000027', 'R2801', '20210108', '00000', 'CC-5211-225513', 'CC-5211-225513', '1', '2', '0900602908', '0900602908', '2', '新北市板橋區四川路１段３３４號', '2', '2', '31900', '31900', 'SFD0012-07', '0', TO_DATE('2021-01-08 00:00:00', 'YYYY-MM-DD HH24:MI:SS'), 'TL210108000027', '1', 'P210108000027', '2', 'L', '1', '0', '1', '2', 'tdms_bill@fareastone.com.tw', '220217', '25885', '212612', 'NON_TL210108000027', '2', '394761007431920143', '2', '3', 'NBT02', '2000065960604463')



################